$ ->
  
  $('#update-firstname').click ->
    firstname = $('#firstname').val()
    $.post('/update_user', { 'user_id' : "#{window.user_id}", 'firstname' : "#{firstname}" }, (data) ->
      console.log data
      $('#input-firstname-area').remove()
    )

  $('#update-lastname').click ->
    lastname = $('#lastname').val()
    $.post('/update_user', { 'user_id' : "#{window.user_id}", 'lastname' : "#{lastname}" }, (data) ->
      console.log data
      $('#input-lastname-area').remove()
    )

  $('#update-bio').livequery ->
    $(this).click ->
      bio = $('#bio').val()
      $.post('/update_user', { 'user_id' : "#{window.user_id}", 'bio' : "#{bio}" }, (data) ->
        console.log data
        $('#input-bio-area').replaceWith("
          <span id='user-bio'>#{data.data.bio}</span>
        ")
        $('#edit-bio-area').show()
      )

  $('#update-school').click ->
    school = $('[name="school"]').val()
    role = $('[name="role"]').val()
    $.post('/update_user', { 'user_id' : "#{window.user_id}", 'school' : "#{school}", 'role' : "#{role}" }, (data) ->
      console.log data
    )

  $('#edit-bio').livequery ->
    $(this).click -> 
      current_bio = $('#user-bio').html()
      $('#user-bio').replaceWith("
        <div id='input-bio-area'>
          <input type='text' id='bio' placeholder='#{current_bio}'>
          <div class='btn btn-primary rounded' id='update-bio'>Submit</div>
        </div>")
      $('#edit-bio-area').hide()

